(function(){function g(a,b){return(b||document).querySelector(a)}function W(a,b){var c=a.className.replace(new RegExp("\\b"+b+"\\b","g"),"");a.className=c.replace(/ +/g," ").replace(/(^ +| +$)/g,"")+" "+b}function X(a,b){a.className=a.className.replace(new RegExp("\\b"+b+"\\b","g")," ").replace(/ +/g," ").replace(/(^ +| +$)/g,"")}function M(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function P(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)}
function p(a){a=(S+a).replace(/-+/g,"-").replace(/(^-|-$)/g,"").split("-");for(var b=1;b<a.length;b++)a[b]=a[b].substr(0,1).toLocaleUpperCase()+a[b].substr(1).toLowerCase();return a.join("")}function Y(){if(navigator.userAgent.match(/MSIE [678]/))try{this.__objType="MediaPlayer",this.audioObj=document.createElement("object"),this.audioObj.classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6",this.audioObj.settings.autoStart=!1,this.audioObj.settings.volume=100}catch(a){}else this.__objType="Audio",
this.audioObj=document.createElement("audio");this.audioObj.style.display="none";this.audioObj.style.position="absolute";this.audioObj.style.left="-100px";this.audioObj.style.top="-100px";document.body.insertBefore(this.audioObj,document.body.firstChild)}function Z(){this.a=this.b=this.g=this.r=0;this.next=null}function s(a,b,c,d,e,f){a=K(K(b,a),K(d,f));return K(a<<e|a>>>32-e,c)}function v(a,b,c,d,e,f,h){return s(b&c|~b&d,a,b,e,f,h)}function w(a,b,c,d,e,f,h){return s(b&d|c&~d,a,b,e,f,h)}function t(a,
b,c,d,e,f,h){return s(c^(b|~d),a,b,e,f,h)}function K(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function F(a){g("#promptLayer").style.display="block";g("#promptLayer .txt").style.width=B+"px";g("#promptLayer .txt").style.height=Q+"px";g("#promptLayer .txt").innerHTML=a}function G(){g("#promptLayer").style.display="none"}var x=document.createElement("canvas");x.width=x.height=1;if(0!==x.toDataURL("image/jpeg").indexOf("data:image/jpeg")){var N=document.createElement("script");
N.type="text/javascript";N.src="/microblog-v3/2015subject/0211_chunjie/cvsjpeg.js";document.body.insertBefore(N,document.body.firstChild)}x="";-1!==navigator.userAgent.indexOf("WebKit")?x="webkit":-1!==navigator.userAgent.indexOf("Firefox")?x="moz":-1!==navigator.userAgent.indexOf("MSIE")&&(x="ms");var $={moz:"animationend",webkit:"webkitAnimationEnd",ms:"MSAnimationEnd"}[x]||"animationend",aa={moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd"}[x]||"transitionend",S={moz:"",webkit:"-webkit-",
ms:""}[x]||"",T="mousedown",U="mousemove",V="mouseup";void 0!==document.ontouchstart&&(T="touchstart",U="touchmove",V="touchend");var L={_timers:[],mute:!1,touch:!0,loop:!0,init:function(a,b){var c=this;this.ele&&this.uninit();this.ele=g(a);this.scenery=(this.ele||document).querySelectorAll(".scenery");for(var d=0;d<this.scenery.length;d++)this.scenery[d].style.display="none";this.length=this.scenery.length;this.index=-1;this.cssKey="";b&&b.length?(this.preloadList=b,this.preload()):this.select(0);
var e=-1,f,h,k,l=0;this.__startFn=function(a){!1!==c.touch&&(a=a.touches?a.touches[0]:a,e=a.pageX,f=a.pageY,c.soundSrc&&!c.mute&&c.auido_bg.isPaused()&&c.playSound())};this.__moveFn=function(a){if(!1!==c.touch&&-1!=e)return a=a.touches?a.touches[0]:a,h=a.pageX-e,k=a.pageY-f,0==l?((c.loop||0!=c.index)&&0<k&&10<Math.abs(k)&&Math.abs(k)>Math.abs(h)&&(l=-1,c.preMoveScen(k)),(c.loop||c.index!=c.length-1)&&0>k&&10<Math.abs(k)&&Math.abs(k)>Math.abs(h)&&(l=1,c.nextMoveScen(k))):10<Math.abs(k)&&c.moveScen(k,
l),!1};this.__endFn=function(a){!1!==c.touch&&(e=-1,0!=l&&c.endMoveScen(l),l=0)};M(this.ele,T,this.__startFn);M(this.ele,U,this.__moveFn);M(this.ele,V,this.__endFn);this.auido_bg||(this.auido_bg=new Y,this.auido_bg.setLoop(!0),g(".sound")&&M(g(".sound"),"click",function(){c.mute?c.playSound():c.stopSound();return!1}))},setSound:function(a){this.soundSrc=a;this.mute?this.stopSound():this.playSound()},stopSound:function(){this.mute=!0;W(g(".sound"),"s_off");X(g(".sound"),"s_on");this.auido_bg.pause()},
playSound:function(){this.auido_bg.setSrc(this.soundSrc);this.mute=!1;X(g(".sound"),"s_off");W(g(".sound"),"s_on");this.auido_bg.play()},preload:function(){var a=this,b=0,c;this.loading=document.createElement("div");this.loading.className="loadingPage";this.loading.innerHTML='<div class="loadingBar"><div class="block_1 loading"></div><div class="block_2 loading"></div><div class="block_3 loading"></div><div class="block_4 loading"></div><div class="block_5 loading"></div></div><div class="loadingTxt">\u8f7d\u5165\u4e2d</div>';
this.ele.appendChild(this.loading);this.loading.style.display="block";for(var d=0;d<this.preloadList.length;d++)c=new Image,c.onerror=c.onload=function(){b++;b>=a.preloadList.length&&(a.loading.style.display="none",a.select(0))},c.src=this.preloadList[d]},uninit:function(){this.ele&&(P(this.ele,T,this.__startFn),P(this.ele,U,this.__moveFn),P(this.ele,V,this.__endFn),this.ele=null,this.auido_bg.pause())},select:function(a,b){var c=this;this.soundSrc&&!this.mute&&this.auido_bg.isPaused()&&this.playSound();
if(a!=this.index){var d=0;a>this.index?d=1:a<this.index&&(d=-1);-1==this.index&&(d=0);a>=this.length?a=0:0>a&&(a=this.length-1);g(".moveArr")&&(a+1==this.length?g(".moveArr").style.display="none":g(".moveArr").style.display="block");this.preScen&&(this.preScen.style.zIndex=1);this.nowScen&&("function"==typeof this.nowScen._endFn&&this.nowScen._endFn(),this.nowScen.style.zIndex=2,this.preScen=this.nowScen);this.nowScen=this.scenery[a];this.nowScen.style.display="block";this.nowScen.style.zIndex=10;
this.preloadScen(this.nowScen);clearTimeout(this._autoNextTimer);var e=function(){clearTimeout(c._pageTranEndTimeout);this.removeEventListener(aa,e,null);this.style[p("transition")]="none";this._endFn=null;c.clearPreScen();c.actionScen()};this.nowScen._endFn=e;this.nowScen.addEventListener(aa,e,null);this.index=a;0!==d?(this.nowScen.style[p("transition")]="none",this.nowScen.style[p("transform")]="translateY("+d*document.body.clientHeight+"px)",this.preScen&&(this.preScen.style[p("transition")]="none"),
b||c.endMoveScen(d)):this.autoNext();this.readyScen();0==d&&this.actionScen()}},next:function(){(this.loop||this.index!=this.length-1)&&this.select(this.index+1)},pre:function(){(this.loop||0!=this.index)&&this.select(this.index-1)},preMoveScen:function(a){this.select(this.index-1,!0);this.moveScen(a,-1)},nextMoveScen:function(a){this.select(this.index+1,!0);this.moveScen(a,1)},moveScen:function(a,b){var c=b*document.body.clientHeight+a,d=c*b/document.body.clientHeight*.1+.9;this.nowScen.style[p("transform-origin")]=
"50% 50%";this.nowScen.style[p("transform")]="translateY("+c+"px)";this.preScen&&(this.preScen.style[p("transform-origin")]="50% "+(1==b?"0":"100%"),this.preScen.style[p("transform")]="scale("+d+")")},endMoveScen:function(a){var b=this;setTimeout(function(){b.nowScen.style[p("transform-origin")]="50% 50%";b.nowScen.style[p("transition")]=S+"transform 0.4s ease-out";b.nowScen.style[p("transform")]="translateY(0px)";b.preScen&&(b.preScen.style[p("transition")]=S+"transform 0.4s ease-out",b.preScen.style[p("transform-origin")]=
"50% "+(1==a?"0":"100%"),b.preScen.style[p("transform")]="scale(0.9)")},10);this.autoNext();clearTimeout(this._pageTranEndTimeout);this._pageTranEndTimeout=setTimeout(function(){b.nowScen._endFn&&b.nowScen._endFn()},500);this.preloadScen(this.index+1>=this.length-1?this.scenery[0]:this.scenery[this.index+1]);if("function"===typeof this.onchange)this.onchange()},preloadScen:function(a){if(a&&!a.getAttribute("data-isLoad")){for(var b=(a||document).querySelectorAll("img[data-src]"),c=0;c<b.length;c++)b[c].src=
b[c].getAttribute("data-src"),b[c].removeAttribute("data-src");a.setAttribute("data-isLoad",1)}},autoNext:function(){var a=this,b=0;clearTimeout(this._autoNextTimer);if(b=this.nowScen.getAttribute("data-autoNext"))b=-1!==b.indexOf("ms")?b==parseFloat(b):1E3*parseFloat(b),3E3>b&&(b=3E3),this._autoNextTimer=setTimeout(function(){a.next()},b)},clearPreScen:function(){if(this.preScen){this.preScen.style.display="none";this.preScen.childs||(this.preScen.childs=(this.preScen||document).querySelectorAll("*[data-animationIn],*[data-animation],*[data-animationOut]"));
for(var a=0;a<this.preScen.childs.length;a++)"function"==typeof this.preScen.childs[a]._endFn&&this.preScen.childs[a]._endFn()}},readyScen:function(){this.nowScen.childs||(this.nowScen.childs=(this.nowScen||document).querySelectorAll("*[data-animationIn],*[data-animation],*[data-animationOut]"));for(var a,b,c,d=0;d<this.nowScen.childs.length;d++)c=this.nowScen.childs[d],a=c.getAttribute("data-animationIn"),b=c.getAttribute("data-animation"),c.getAttribute("data-animationOut"),a&&(a=a.match(/([a-z]*)\s([\d\.]+(?:s|ms))(?:\s([\d\.]+(?:s|ms)))?/i))&&
3<=a.length?c.style.display="none":b&&(b=b.match(/([a-z]*)\s([\d\.]+(?:s|ms))(?:\s([\d\.]+(?:s|ms)))?/i))&&3<=b.length&&(c.setAttribute("data-endClassName",c.getAttribute("data-endClassName")||c.className),c.className=c.getAttribute("data-endClassName")+" "+b[1],c.style[p("animation-duration")]=b[2],c.style[p("animation-fill-mode")]="backwards",c.style[p("animation-play-state")]="paused")},actionScen:function(){var a;this.nowScen.childs||(this.nowScen.childs=(this.nowScen||document).querySelectorAll("*[data-animationIn],*[data-animation],*[data-animationOut]"));
for(;a=this._timers.pop();)clearTimeout(a);for(var b,c,d=0;d<this.nowScen.childs.length;d++)c=this.nowScen.childs[d],a=c.getAttribute("data-animationIn"),b=c.getAttribute("data-animation"),c.getAttribute("data-animationOut"),a&&(a=a.match(/([a-z]*)\s([\d\.]+(?:s|ms))(?:\s([\d\.]+(?:s|ms)?))?/i))&&3<=a.length?this._actionIn(c):b&&(b=b.match(/([a-z]*)\s([\d\.]+(?:s|ms))(?:\s([\d\.]+(?:s|ms)?))?(?:\s(\d+|infinite))?/i))&&3<=b.length&&this._action(c)},_actionIn:function(a){var b=this,c=a.getAttribute("data-animationIn").match(/([a-z]*)\s([\d\.]+(?:s|ms))(?:\s([\d\.]+(?:s|ms)?))?/i),
d=function(){this.removeEventListener($,arguments.call,null);this.getAttribute("data-endClassName")&&(this.className=this.getAttribute("data-endClassName"));this.removeAttribute("data-endClassName");this._endFn=null;delete this._endFn;b._action(this)};a.addEventListener($,d,null);a._endFn=d;a.style.display="block";a.setAttribute("data-endClassName",a.getAttribute("data-endClassName")||a.className);a.className=a.getAttribute("data-endClassName")+" "+c[1];a.style[p("animation-duration")]=c[2];a.style[p("animation-delay")]=
c[3]||0;a.style[p("animation-fill-mode")]="both";a.style[p("animation-iteration-count")]=1;a.style[p("animation-play-state")]="running"},_ele_animation_end_event_fn:function(){this.getAttribute("data-endClassName")&&(this.className=this.getAttribute("data-endClassName"));this.removeAttribute("data-endClassName");this._endFn=null;delete this._endFn},_action:function(a){var b=a.getAttribute("data-animation");b&&(b=b.match(/([a-z]*)\s([\d\.]+(?:s|ms))(?:\s([\d\.]+(?:s|ms)?))?(?:\s(\d+|infinite))?/i))&&
3<=b.length&&(a._endFn=this._ele_animation_end_event_fn,a.style.display="block",a.setAttribute("data-endClassName",a.getAttribute("data-endClassName")||a.className),a.className=a.getAttribute("data-endClassName")+" "+b[1],a.style[p("animation-duration")]=b[2],a.style[p("animation-delay")]=b[3]||0,a.style[p("animation-fill-mode")]="both",a.style[p("animation-iteration-count")]=parseFloat(b[4])?b[4]:"infinite",a.style[p("animation-play-state")]="running")}};Y.prototype={mute:!1,setMute:function(a){this.mute=
a=!0===a;if("Audio"==this.__objType)this.audioObj.muted=a;else try{this.audioObj.settings.mute=a}catch(b){}},setVolume:function(a){a=parseInt(a);100<a?a=100:0>a&&(a=0);if("Audio"==this.__objType)this.audioObj.volume=a/100;else try{this.audioObj.settings.volume=a}catch(b){}},play:function(){if("Audio"==this.__objType)this.audioObj.play();else try{this.audioObj.controls.play()}catch(a){}},setLoop:function(a){a=1==a;if("Audio"==this.__objType)this.audioObj.loop=a;else try{this.audioObj.settings.playCount=
a?9999:1}catch(b){}},pause:function(){if("Audio"==this.__objType)this.audioObj.pause();else try{this.audioObj.controls.pause()}catch(a){}},isPaused:function(){if("Audio"==this.__objType)return this.audioObj.paused;try{return 2==this.audioObj.playState}catch(a){}},setSrc:function(a){if("Audio"==this.__objType)this.audioObj.src=a;else try{this.audioObj.URL=a}catch(b){}}};var fa=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,
512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,
337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ga=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,
19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,
24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],ba=function(a){for(var b=[],c=0;c<8*a.length;c+=8)b[c>>5]|=(a.charCodeAt(c/8)&255)<<c%32;a=8*a.length;b[a>>5]|=128<<a%32;b[(a+64>>>9<<4)+14]=a;a=1732584193;for(var c=-271733879,d=-1732584194,e=271733878,f=0;f<b.length;f+=16){var h=a,k=c,l=d,ea=e;a=v(a,c,d,e,b[f+0],7,-680876936);e=v(e,a,c,d,b[f+1],12,-389564586);d=v(d,e,a,c,b[f+2],17,606105819);
c=v(c,d,e,a,b[f+3],22,-1044525330);a=v(a,c,d,e,b[f+4],7,-176418897);e=v(e,a,c,d,b[f+5],12,1200080426);d=v(d,e,a,c,b[f+6],17,-1473231341);c=v(c,d,e,a,b[f+7],22,-45705983);a=v(a,c,d,e,b[f+8],7,1770035416);e=v(e,a,c,d,b[f+9],12,-1958414417);d=v(d,e,a,c,b[f+10],17,-42063);c=v(c,d,e,a,b[f+11],22,-1990404162);a=v(a,c,d,e,b[f+12],7,1804603682);e=v(e,a,c,d,b[f+13],12,-40341101);d=v(d,e,a,c,b[f+14],17,-1502002290);c=v(c,d,e,a,b[f+15],22,1236535329);a=w(a,c,d,e,b[f+1],5,-165796510);e=w(e,a,c,d,b[f+6],9,-1069501632);
d=w(d,e,a,c,b[f+11],14,643717713);c=w(c,d,e,a,b[f+0],20,-373897302);a=w(a,c,d,e,b[f+5],5,-701558691);e=w(e,a,c,d,b[f+10],9,38016083);d=w(d,e,a,c,b[f+15],14,-660478335);c=w(c,d,e,a,b[f+4],20,-405537848);a=w(a,c,d,e,b[f+9],5,568446438);e=w(e,a,c,d,b[f+14],9,-1019803690);d=w(d,e,a,c,b[f+3],14,-187363961);c=w(c,d,e,a,b[f+8],20,1163531501);a=w(a,c,d,e,b[f+13],5,-1444681467);e=w(e,a,c,d,b[f+2],9,-51403784);d=w(d,e,a,c,b[f+7],14,1735328473);c=w(c,d,e,a,b[f+12],20,-1926607734);a=s(c^d^e,a,c,b[f+5],4,-378558);
e=s(a^c^d,e,a,b[f+8],11,-2022574463);d=s(e^a^c,d,e,b[f+11],16,1839030562);c=s(d^e^a,c,d,b[f+14],23,-35309556);a=s(c^d^e,a,c,b[f+1],4,-1530992060);e=s(a^c^d,e,a,b[f+4],11,1272893353);d=s(e^a^c,d,e,b[f+7],16,-155497632);c=s(d^e^a,c,d,b[f+10],23,-1094730640);a=s(c^d^e,a,c,b[f+13],4,681279174);e=s(a^c^d,e,a,b[f+0],11,-358537222);d=s(e^a^c,d,e,b[f+3],16,-722521979);c=s(d^e^a,c,d,b[f+6],23,76029189);a=s(c^d^e,a,c,b[f+9],4,-640364487);e=s(a^c^d,e,a,b[f+12],11,-421815835);d=s(e^a^c,d,e,b[f+15],16,530742520);
c=s(d^e^a,c,d,b[f+2],23,-995338651);a=t(a,c,d,e,b[f+0],6,-198630844);e=t(e,a,c,d,b[f+7],10,1126891415);d=t(d,e,a,c,b[f+14],15,-1416354905);c=t(c,d,e,a,b[f+5],21,-57434055);a=t(a,c,d,e,b[f+12],6,1700485571);e=t(e,a,c,d,b[f+3],10,-1894986606);d=t(d,e,a,c,b[f+10],15,-1051523);c=t(c,d,e,a,b[f+1],21,-2054922799);a=t(a,c,d,e,b[f+8],6,1873313359);e=t(e,a,c,d,b[f+15],10,-30611744);d=t(d,e,a,c,b[f+6],15,-1560198380);c=t(c,d,e,a,b[f+13],21,1309151649);a=t(a,c,d,e,b[f+4],6,-145523070);e=t(e,a,c,d,b[f+11],10,
-1120210379);d=t(d,e,a,c,b[f+2],15,718787259);c=t(c,d,e,a,b[f+9],21,-343485551);a=K(a,h);c=K(c,k);d=K(d,l);e=K(e,ea)}b=[a,c,d,e];a="";for(c=0;c<4*b.length;c++)a+="0123456789abcdef".charAt(b[c>>2]>>c%4*8+4&15)+"0123456789abcdef".charAt(b[c>>2]>>c%4*8&15);return a},ha=function(){function a(a,b,c,h,k){var l=a.getShortAt(b+2,k);h=a.getLongAt(b+4,k);c=a.getLongAt(b+8,k)+c;switch(l){case 1:case 7:if(1==h)return a.getByteAt(b+8,k);c=4<h?c:b+8;b=[];for(l=0;l<h;l++)b[l]=a.getByteAt(c+l);return b;case 2:return a.getStringAt(4<
h?c:b+8,h-1);case 3:if(1==h)return a.getShortAt(b+8,k);c=2<h?c:b+8;b=[];for(l=0;l<h;l++)b[l]=a.getShortAt(c+2*l,k);return b;case 4:if(1==h)return a.getLongAt(b+8,k);b=[];for(l=0;l<h;l++)b[l]=a.getLongAt(c+4*l,k);return b;case 5:if(1==h)return a.getLongAt(c,k)/a.getLongAt(c+4,k);b=[];for(l=0;l<h;l++)b[l]=a.getLongAt(c+8*l,k)/a.getLongAt(c+4+8*l,k);return b;case 9:if(1==h)return a.getSLongAt(b+8,k);b=[];for(l=0;l<h;l++)b[l]=a.getSLongAt(c+4*l,k);return b;case 10:if(1==h)return a.getSLongAt(c,k)/a.getSLongAt(c+
4,k);b=[];for(l=0;l<h;l++)b[l]=a.getSLongAt(c+8*l,k)/a.getSLongAt(c+4+8*l,k);return b}}var b={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",
513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},c=function(a,b,c){var h=a,k=b||0,l=0;this.getRawData=function(){return h};"string"==typeof a?(l=c||h.length,this.getByteAt=function(a){return h.charCodeAt(a+k)&255}):"unknown"==typeof a&&(l=c||IEBinary_getLength(h),
this.getByteAt=function(a){return IEBinary_getByteAt(h,a+k)});this.getLength=function(){return l};this.getSByteAt=function(a){a=this.getByteAt(a);return 127<a?a-256:a};this.getShortAt=function(a,b){var c=b?(this.getByteAt(a)<<8)+this.getByteAt(a+1):(this.getByteAt(a+1)<<8)+this.getByteAt(a);0>c&&(c+=65536);return c};this.getSShortAt=function(a,b){var c=this.getShortAt(a,b);return 32767<c?c-65536:c};this.getLongAt=function(a,b){var c=this.getByteAt(a),d=this.getByteAt(a+1),e=this.getByteAt(a+2),f=
this.getByteAt(a+3),c=b?(((c<<8)+d<<8)+e<<8)+f:(((f<<8)+e<<8)+d<<8)+c;0>c&&(c+=4294967296);return c};this.getSLongAt=function(a,b){var c=this.getLongAt(a,b);return 2147483647<c?c-4294967296:c};this.getStringAt=function(a,b){for(var c=[],d=a,e=0;d<a+b;d++,e++)c[e]=String.fromCharCode(this.getByteAt(d));return c.join("")};this.getCharAt=function(a){return String.fromCharCode(this.getByteAt(a))};this.toBase64=function(){return window.btoa(h)};this.fromBase64=function(a){h=window.atob(a)}};return function(d,
e){var f;a:{var h=new c(d);if(255!=h.getByteAt(0)||216!=h.getByteAt(1))f=!1;else{var k=2;for(f=h.getLength();k<f;){if(255!=h.getByteAt(k)){f=!1;break a}var l=h.getByteAt(k+1);if(22400==l||225==l){b:if(f=h,l=k+4,h.getShortAt(k+2,!0),"Exif"!=f.getStringAt(l,4))f=!1;else{var g=void 0,h=l+6;if(18761==f.getShortAt(h))g=!1;else if(19789==f.getShortAt(h))g=!0;else{f=!1;break b}if(42!=f.getShortAt(h+2,g)||8!=f.getLongAt(h+4,g))f=!1;else{for(var k=h+8,l=b,p=f.getShortAt(k,g),m={},n=0;n<p;n++){var u=k+12*n+
2,r=l[f.getShortAt(u,g)];m[r]=a(f,u,h,k,g)}f=m}}break a}k+=2+h.getShortAt(k+2,!0)}f=void 0}}return f[e]?f[e]:""}}(),ca=navigator.userAgent.match(/ OS (\d+).*? Mac OS/)||!1;navigator.userAgent.indexOf("NetType/WIFI");if(-1!==navigator.userAgent.indexOf("Messenger")&&-1===location.host.indexOf(".people."))location.href="http://mblog.people.com.cn/h5/muqin2016";else{var R={name:"urlcache",get:function(a){if(/[&\\=\|\?%]/.test(a))window.console&&console.log("name\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u7b26\u53f7:"+
a);else if(window.localStorage&&(a=(window.localStorage[this.name]||"").match(RegExp("(?:^|&)"+a+"=([^&]*)"))))return decodeURIComponent(a[1])},set:function(a,b){if(/[&\\=\|\?%]/.test(a))return window.console&&console.log("name\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u7b26\u53f7:"+a),!1;if(window.localStorage){var c=window.localStorage[this.name]||"",c=void 0===this.get(a)?c+((""===c?"":"&")+a+"="+b.replace(/&/g,"%26").replace(/=/g,"%3D")):c.replace(RegExp("(^|&)"+a+"=([^&]*)"),"$1"+a+"="+encodeURIComponent(b));
window.localStorage[this.name]=c;return!0}return!1},del:function(a){if(/[&\\=\|\?%]/.test(a))return alert("name\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u7b26\u53f7"),!1;if(window.localStorage&&void 0!==this.get(a)){var b=window.localStorage[this.name]||"",b=b.replace(RegExp("(^|&)"+a+"=([^&]*)"),"");window.localStorage[this.name]=b.replace(/^&/,"");return!0}return!1},clear:function(){window.localStorage&&(window.localStorage[this.name]="")}},r={ready:!0,limit:7,maxWidth:500,maxHeight:550,type:"*",num:0,
multiple:!0,init:function(){var a=this;this.fileRef=document.createElement("div");this.fileRef.style.width="1px";this.fileRef.style.height="1px";this.fileRef.style.overflow="hidden";this.fileRef.style.position="absolute";this.fileRef.style.zIndex=900;this.fileRef.style.left="-10px";this.fileRef.style.top="-10px";document.body.appendChild(this.fileRef);this.form=document.createElement("form");this.form.className="ente_uploadForm";this.form.setAttribute("target","enteUploadImgFrame");this.form.setAttribute("enctype",
"multipart/form-data");this.form.setAttribute("method","post");this.form.style.width="260px";this.fileRef.appendChild(this.form);this.form.innerHTML='<div class="ente_f"><input type="file" multiple="multiple" accept="image/'+this.type+'" name="upload" /></div>';this.file=g("input[type=file]",this.form);this.fileBox=g(".ente_f",this.form);this.form.style.opacity="0";if(ca){var b=0,c=function(){b++;3<=b&&0==a.file.files.length&&"function"==typeof a.oncomplete&&(a.oncomplete(),P(document,"touchstart",
c))};this.file.onclick=function(){"function"==typeof a.onbegin&&(a.onbegin(),M(document,"touchstart",c))}}this.file.onchange=function(){ca||"function"!=typeof a.onbegin||(a.onbegin(),M(document,"touchstart",c));P(document,"touchstart",c);a.setDisabled(!0);a._push(this)}},setMultiple:function(a){(this.multiple=!0===a)?this.file.setAttribute("multiple","multiple"):this.file.removeAttribute("multiple")},bind:function(a){var b=this;a="string"==typeof a?g(a):a;a.onmouseover=function(){b.coverTarget(a)};
this.coverTarget(a)},unbind:function(a){a.onmouseover=null},_loadQueue:[],_load:function(){if(this._loadQueue.length){var a=this._loadQueue.shift();a&&this._readExif(a)}},_push:function(a){_self=this;for(var b=this.num=this.sum=0;b<a.files.length&&!(b>=this.limit);b++)this._loadQueue.push(a.files[b]),this.sum++,_self._load()},_readExif:function(a,b){var c=this,d=(window.URL||window.webkitURL).createObjectURL(a);if(a)try{var e=new FileReader;e.onload=function(a){a=ha(this.result,"Orientation");c._readFile(d,
a,b)};e.onerror=function(a){c._readFile(d,0,b)};e.readAsBinaryString(a)}catch(f){this._readFile(d,0,b)}},_readFile:function(a,b,c){var d=this,e=new Image,f=b||0,h=navigator.userAgent.match(/ OS (\d+).*? Mac OS/)||!1;h&&(h=parseInt(h[1]));e.onload=function(){var a=e.width,b=e.height,c=a/b,g,m,n,u=1;3E3<Math.max(a,b)&&(a*=.8,b*=.8);if(h&&8>h){g=document.createElement("canvas");g.width=a;g.height=b;n=g.getContext("2d");n.drawImage(e,0,0,a,b);n=n.getImageData(0,0,1,b).data;for(var u=d._detectSquash(n,
b,0),p=0;1!=u&&3>p;)p++,m=document.createElement("canvas"),m.width=a,m.height=b,n=m.getContext("2d"),n.drawImage(g,0,0,a,b/u),n=n.getImageData(0,0,1,b).data,u=d._detectSquash(n,b,0),1!=u&&(a*=.8,b*=.8),g=m}else g=e;if(6==f||8==f)c=a,a=b,b=c,c=a/b;a>d.maxWidth&&(a=parseInt(d.maxWidth),b=parseInt(a/c));b>d.maxHeight&&(b=parseInt(d.maxHeight),a=parseInt(b*c));c=document.createElement("canvas");n=c.getContext("2d");c.width=a;c.height=b;switch(f){case 3:n.rotate(180*Math.PI/180);n.drawImage(g,-a,-b,a,
b);break;case 6:n.rotate(90*Math.PI/180);n.drawImage(g,0,-a,b,a);break;case 8:n.rotate(270*Math.PI/180);n.drawImage(g,-b,0,b,a);break;default:n.rotate(0),n.drawImage(g,0,0,a,b)}a=c.toDataURL("image/jpeg",h?.7:.86);c=d.zoomCanvas(c,80,80);c.getContext("2d");smallBase64=c.toDataURL("image/jpeg",.7);"function"==typeof d.onadd&&d.add(a,smallBase64);d._load()};e.onerror=function(){d.onerror("\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u6587\u4ef6");alert("\u7531\u4e8e\u5b89\u5168\u9650\u5236\uff0c\u65e0\u6cd5\u4ece\u624b\u673a\u4e2d\u8bfb\u53d6\u7167\u7247\uff0c\u8bf7\u5c1d\u8bd5\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\uff0c\u4f7f\u7528\u62cd\u7167\u4e0a\u4f20\u3002")};
e.src=a},zoomCanvas:function(a,b,c){var d,e,f,h,k=a.width,g=a.height;e=d=0;f=k;h=g;if(1.8<k/b){d=document.createElement("canvas");e=document.createElement("canvas");f=d.getContext("2d");h=e.getContext("2d");d.width=k;d.height=g;for(f.drawImage(a,0,0,k,g);1.8<k/b;)k=Math.round(.6*k),g=Math.round(.6*g),e.width=k,e.height=g,h.drawImage(d,0,0,k,g),d.width=k,d.height=g,f.drawImage(e,0,0,k,g);a=d}a.width>a.height?(f=a.height/c*b,h=a.height,d=(a.width-a.height/c*b)/2,e=0):(f=a.width,h=a.width/b*c,d=0,e=
(a.height-a.width/b*c)/2);k=document.createElement("canvas");k.width=b;k.height=c;k.getContext("2d").drawImage(a,d,e,f,h,0,0,b,c);return k},error:function(a){if("function"==typeof this.onerror)this.onerror(a);this.setDisabled(!1);this.file.value=""},add:function(a,b){if("function"==typeof this.onadd)this.onadd(a,b);this.num++;if("function"==typeof this.onprogress)this.onprogress(this.num/this.sum);if(this.num==this.sum&&(this.setDisabled(!1),this.file.value="","function"==typeof _self.oncomplete))_self.oncomplete()},
_detectSquash:function(a,b,c){switch(c){case 3:case 6:for(c=b-1;0<=c&&0!==a[4*c+3];c--);c=b-2-c;break;default:for(c=0;c<b&&0!==a[4*c+3];c++);--c}if(2>=b-c)return 1;a=c/(b-1);return 0>=a?1:a},coverTarget:function(a){this.target=a="string"==typeof a?g(a):a;var b=0,c=0,d=a;try{for(;null!=d&&d!=document.body&&d!=document.documentElement&&void 0!=d;)b+=d.offsetLeft,c+=d.offsetTop,d=d.offsetParent}catch(e){}this.fileRef.style.width=a.offsetWidth+"px";this.fileRef.style.height=a.offsetHeight+"px";this.fileRef.style.left=
b+"px";this.fileRef.style.top=c+"px";this.fileRef.style.display="block";this.revise||(-1!==navigator.userAgent.indexOf("MSIE 8")?this.fileBox.style.left="-183px":navigator.userAgent.match(/MSIE (9|10)/)?this.fileBox.style.left="-"+(15*this.fileBox.offsetWidth-this.target.offsetWidth)+"px":-1===navigator.userAgent.indexOf("MSIE")&&(this.fileBox.style.left="-100px"),this.revise=!0)},setDisabled:function(a){a=!!a;this.ready=!a;this.form.style.display=a?"none":"block"},hide:function(){this.fileRef.style.display=
"none"},show:function(){this.fileRef.style.display="block"}},da={page:1,bgAudio:"images/sound.mp3",firstItem:{isFirst:!0,isDefault:!0,defaultTxt:"",smallBase64:"",txt:"",imgUrl:""},allDefaultTxt:["\u4f60\u5e38\u8bf4\uff0c\u5988\u4e0d\u997f\n\u5374\u628a\u7f8e\u5473\u7559\u7ed9\u4e86\u6211 \u4f60\u5e38\u8bf4\uff0c\u5988\u90fd\u6709\n\u5374\u603b\u820d\u4e0d\u5f97\u4e3a\u81ea\u5df1\n\u6dfb\u4e00\u4ef6\u65b0\u8863 \u4f60\u5e38\u8bf4\uff0c\u5988\u5f88\u597d\n\u53ea\u56e0\u6015\u6211\u62c5\u5fc3\n\u800c\u72ec\u81ea\u5fcd\u53d7\u7740\u75c5\u75db \u4f60\u5e38\u8bf4\uff0c\u5988\u4e0d\u7d2f\n\u5374\u7559\u7ed9\u6211\n\u8d8a\u6e10\u4f5d\u507b\u7684\u80cc\u5f71 \u4f60\u5e38\u8bf4\uff0c\u5988\u4e0d\u73a9\n\u53ea\u4e3a\u6210\u5168\u6211\n\u8bf4\u8d70\u5c31\u8d70\u7684\u65c5\u884c \u4f60\u5e38\u8bf4\uff0c\u5988\u4e0d\u4e0a\u76f8\n\u53ea\u4e3a\u8bb0\u5f55\u6211\u7684\n\u4e00\u98a6\u4e00\u7b11 \u4f60\u5e38\u8bf4\uff0c\u5fd9\u5c31\u522b\u56de\u4e86\n\u5374\u5077\u5077\u76ef\u7740\u6211\u7684\u7167\u7247\n\u6d41\u773c\u6cea".split(" ")],
defaultTxtIndex:0,elementsPath:"images/",style:1,items:[],limit:7,init:function(){var a=this;g("#btnPreview").onclick=function(){a.preview()};g("#btnToEdit").onclick=function(){L.uninit();a.setPage(2)};g("#btnSubmit").onclick=function(){a.submit()};g("#btnDelete").onclick=function(){a.delItem()};g("#btnSaveChange").onclick=function(){a.saveChange()};this.defaultTxt=this.allDefaultTxt[0];this.setStyle(1);this.items.push(this.firstItem);this.addImage("http://i0.peopleurl.cn/microblog-v3/h5/muqin2016/images/p_01.jpg",
"http://i0.peopleurl.cn/microblog-v3/h5/muqin2016/images/icon_01.jpg",!0);this.addImage("http://i0.peopleurl.cn/microblog-v3/h5/muqin2016/images/p_02.jpg","http://i0.peopleurl.cn/microblog-v3/h5/muqin2016/images/icon_02.jpg",!0);this.addImage("http://i0.peopleurl.cn/microblog-v3/h5/muqin2016/images/p_03.jpg","http://i0.peopleurl.cn/microblog-v3/h5/muqin2016/images/icon_03.jpg",!0)},setStyle:function(a){this.style=a||1;this.setPage(2);this.firstItem.img=g("#firstPageImg");this.firstItem.imgUrl=this.firstItem.defaultSrc=
this.firstItem.img.src=this.elementsPath+"icon.jpg";g("#lastPageImg").setAttribute("src",this.elementsPath+"icon_end.jpg");this.defaultTxt=this.allDefaultTxt[this.style-1]||this.allDefaultTxt[0];this.resetDefaTxt()},setPage:function(a){1===a?(g(".e_page_2").style.display="none",g(".e_page_3").style.display="none",r.hide(),this.page=1):2===a?(g(".e_page_2").style.display="block",g(".e_page_3").style.display="none",this.checkLimit(),this.page=2):3===a&&(g(".e_page_2").style.display="none",g(".e_page_3").style.display=
"block",r.hide(),this.page=3)},addImage:function(a,b,c){var d=this;if(!(this.items.length>=this.limit+1)){var e={};e.smallBase64=b;e.li=document.createElement("li");e.imgSrc=a;e.img=new Image;var f=document.createElement("span");e.img.src=b||a;e.li.appendChild(f);f.appendChild(e.img);b=document.createElement("div");b.className="itemTxt";e.li.appendChild(b);b=new Image;b.onload=function(){e.imgWidth=this.width;e.imgHeight=this.height};b.src=a;g("#addItemBtn").parentNode.insertBefore(e.li,g("#addItemBtn"));
e.txt=this.defaultTxt[this.defaultTxtIndex];e.isDefaTxt=!0;c&&(e.imgUrl=a);this.defaultTxtIndex++;this.defaultTxtIndex>=this.defaultTxt.length&&(this.defaultTxtIndex=0);e.li.onclick=function(){d.change(e)};this.items.push(e);this.checkLimit()}},checkLimit:function(){this.items.length>=this.limit+1?(g("#addItemBtn").style.display="none",r.hide()):(g("#addItemBtn").style.display="block",r.coverTarget("#addImage"),r.show(),r.limit=this.limit-this.items.length+1)},preview:function(){if(1==this.items.length)alert("\u81f3\u5c11\u9700\u8981\u6dfb\u52a01\u5f20\u7167\u7247\uff0c\u8bf7\u70b9\u51fb\u201c+\u201d\u6309\u94ae\u6dfb\u52a0\u7167\u7247\u3002");
else{var a=document.body.clientWidth,b=document.body.clientHeight;window.resetTop=function(c){c.height*N!=b&&(c.style.top=Math.round(.4*(b-c.height*a/c.width))+"px")};L.uninit();for(var c='<div class="globalPackage"><div class="sound s_off"></div><div class="moveArr"></div></div><div class="scenery page_01"><div class="bg"></div><div class="title" data-animationIn="fadeInDown 1s 0.5s"></div><div class="t_02" data-animationIn="fadeInRight 1s 0"></div><div class="footer" data-animationIn="fadeInUp 1s 1.5s" data-animation="shine 1s 0 1"><div class="logo"></div></div></div>',
d=["fadeInLeft 1s 0","fadeInRight 1s 0","fadeInDown 1s 0","fadeInUp 1s 0"],e=["fadeInRight 3s ","fadeInLeft 3s ","fadeInRight 3s ","fadeInLeft 3s "],f=1;f<this.items.length;f++)c+='<div class="scenery p_0'+f+'" data-autoNext="1000"><div class="userImgBox" data-animationIn="'+d[(f-1)%d.length]+'"><canvas id="bgCanvas_'+(f-1)+'" class="userBgImg"></canvas><img src="'+this.items[f].imgSrc+'" class="userImg" onload="showBlurBg(this);" style="top:'+Math.round(.5*(b-this.items[f].imgHeight*a/this.items[f].imgWidth))+
'px"></div>',this.items[f].txt&&(c+='<div class="userTxt" data-animationIn="'+e[(f-1)%e.length]+'">'+decodeURI(this.items[f].txt).replace(/</g,"&lt;").replace(/\n+/g,"<br>")+"</div>"),c+="</div>";c+='<div class="scenery page_end_0'+this.style+'"><div class="bg"></div><div class="photo" data-animationIn="rollIn 1s 0"></div></div>';g(".slideshow").innerHTML=c;this.setPage(3);L.init(".slideshow");L.setSound(this.bgAudio)}},submit:function(){if(1>=this.items.length)alert("\u81f3\u5c11\u9700\u8981\u6dfb\u52a01\u5f20\u7167\u7247\uff0c\u8bf7\u70b9\u51fb\u201c+\u201d\u6309\u94ae\u6dfb\u52a0\u7167\u7247\u3002"),
this.setPage(2);else{for(var a=0;a<this.items.length;a++);this.uploadImg()}},change:function(a){this._changeItem=a;g(".imgTxtLayer").style.display="block";g(".imgTxtLayer .it_pic img").setAttribute("src",a.imgSrc);g(".imgTxtLayer .it_txt textarea").value=a.txt||"";r.__onadd=r.onadd;r.onadd=function(b,c){a.imgSrc=b;a.smallBase64=c;a.isFirst&&(a.isDefault=!1);a.imgUrl="";a.img.src=c;var d=new Image;d.onload=function(){a.imgWidth=this.width;a.imgHeight=this.height};d.src=b;g(".imgTxtLayer .it_pic img").setAttribute("src",
b)};r.setMultiple(!1);r.bind("#changeImage")},saveChange:function(){if(this._changeItem){var a=g(".imgTxtLayer .it_txt textarea").value||"";a!=this._changeItem.txt&&(this._changeItem.isDefaTxt=!1);this._changeItem.txt=a;this.closeChangeLayer()}},closeChangeLayer:function(){g(".imgTxtLayer").style.display="none";r.onadd=r.__onadd||r.onadd;r.__onadd=null;r.setMultiple(!0);r.unbind("#changeImage");r.coverTarget("#addImage");this._changeItem=null},resetDefaTxt:function(){this.defaultTxtIndex=0;if(this.items.length){for(var a=
1;a<this.items.length;a++)this.items[a].isDefaTxt&&(this.items[a].txt=this.defaultTxt[(a-1)%this.defaultTxt.length]);this.defaultTxtIndex=this.items.length}},delItem:function(a){if(a=a||this._changeItem)if(a.isFirst)a.isDefault?alert("\u5c01\u9762\u65e0\u6cd5\u5220\u9664"):confirm("\u5c01\u9762\u65e0\u6cd5\u5220\u9664\uff0c\u662f\u5426\u6062\u590d\u9ed8\u8ba4\u5c01\u9762\u5417\uff1f")&&(a.img.src=a.defaultSrc,a.imgUrl=a.defaultSrc,a.txt=a.defaultTxt,a.isDefault=!0,a.smallBase64="",this.closeChangeLayer());
else if(confirm("\u786e\u5b9a\u8981\u5220\u9664\u5f53\u524d\u7167\u7247\u5417\uff1f")){for(var b=[],c=0;c<this.items.length;c++)this.items[c]!=a?b.push(this.items[c]):a.li.parentNode.removeChild(a.li);this.items=b;this.checkLimit();this.resetDefaTxt();this.closeChangeLayer()}},uploadImg:function(){function a(){b.uploadIndex++;if(b.uploadIndex>=b.items.length)b.uploadJSON();else{var c=b.items[b.uploadIndex];c.smallBase64&&!c.imgUrl&&(c.md5=ba(c.smallBase64),c.imgUrl=R.get("img_"+c.md5));c.imgUrl?a():
(f.open("POST","/wx2015ImageUpload.action",!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c="dataStr="+encodeURIComponent(c.imgSrc.substr(23))+"&dataSmall="+encodeURIComponent(c.smallBase64.substr(23)),f.send(c))}}var b=this;F("\u56fe\u7247\u4e0a\u4f20\u4e2d...");this.uploadIndex=-1;for(var c=0,d=0,e=0;e<this.items.length;e++)this.items[e].imgUrl||(c+=this.items[e].smallBase64.length+this.items[e].imgSrc.length);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==
f.readyState&&200==f.status){var c=f.responseText;if(c&&/^\d+$/.test(c)){var e;e="";c="http://i0.peopleurl.cn/nmsgimage/wx/"+c.substr(0,10)+"/"+e+c+".jpg";b.items[b.uploadIndex].imgUrl=c;R.set("img_"+b.items[b.uploadIndex].md5,c);d+=b.items[b.uploadIndex].smallBase64.length+b.items[b.uploadIndex].imgSrc.length;a()}else alert("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01code:600"),G()}else 4==f.readyState&&(alert("\u7f51\u7edc\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01code:"+
f.status),G())};f.ontimeout=function(a){alert("\u4e0a\u4f20\u8d85\u65f6\uff0c\u8bf7\u5728\u8f83\u597d\u7684\u7f51\u7edc\u73af\u5883\u4e2d\u518d\u8bd5\uff01");G()};f.upload&&(f.upload.onprogress=function(a){a.lengthComputable&&(a=(d+a.loaded)/c,a=1<a?1:a,F("\u56fe\u7247\u4e0a\u4f20\u8fdb\u5ea6<br>"+Math.round(c/1024)+"k/"+Math.round(100*a)+"%"))});a()},getJSON:function(){for(var a='{"style":'+this.style+",",a=a+('"firstScrn":{"src":"'+(this.firstItem.isDefault?"":this.firstItem.imgUrl)),a=a+('","txt":"'+
encodeURI(this.firstItem.txt.replace(/</g,"&lt;")||"").replace(/(\\|")/g,"\\$1")+'","width":'+this.firstItem.img.width+',"height":'+this.firstItem.img.height+"},"),a=a+'"scrnery":[',b=1;b<this.items.length;b++)1!=b&&(a+=","),a+='{"src":"'+this.items[b].imgUrl+'","txt":"'+encodeURI(this.items[b].txt.replace(/</g,"&lt;")||"").replace(/(\\|")/g,"\\$1")+'","width":'+(this.items[b].imgWidth||this.items[b].img.width)+',"height":'+(this.items[b].imgHeight||this.items[b].img.height)+"}";return a+"]}"},uploadJSON:function(){var a=
new XMLHttpRequest;F("\u4e0a\u4f20\u573a\u666f\u4e2d...");var b=encodeURIComponent(this.getJSON()),c=ba(b),d=R.get("json_"+c);d?(window.sessionStorage&&(sessionStorage.tempId=d),F("\u8bf7\u7a0d\u5019..."),window.location.href="/h5/muqin2016/"+d):(a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var b=a.responseText;b&&/^\d+$/.test(b)?(window.sessionStorage&&(sessionStorage.tempId=b),R.set("json_"+c,b),F("\u8bf7\u7a0d\u5019..."),setTimeout(function(){window.location.href="http://mblog.people.com.cn/h5/muqin2016/"+
b},2E3)):(alert("\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01code:601"),G())}else 4==a.readyState&&(alert("\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01code:"+a.status),G())},a.ontimeout=function(a){alert("\u4e0a\u4f20\u8d85\u65f6\uff0c\u8bf7\u5728\u8f83\u597d\u7684\u7f51\u7edc\u73af\u5883\u4e2d\u518d\u8bd5\uff01");G()},a.open("POST","/wx2015ChunjieConfUpload.action",!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send("confDataStr="+
b+"&recordType=muqin2016&imageCount="+this.items.length))}},B=document.body.clientWidth,Q=document.body.clientHeight,B=640<B?640:B,Q=1008<Q?1008:Q,N=B/640;M(document,"touchmove",function(a){a.preventDefault()});(x=(x=navigator.userAgent.match(/(?:Windows Phone|SymbianOS|Android|iPad|iPod|iPhone)/))?x[0]:!1)?640>B&&(document.documentElement.style["font-size"]=32*N+"px"):(x=document.documentElement.clientHeight/504*16,B=Math.round(document.documentElement.clientHeight/504*320),document.documentElement.style["font-size"]=
x+"px",document.body.style.overflow="hidden",document.body.style.width=B+"px",x=document.createElement("div"),x.className="pageBtn",x.style.left=B+"px",x.innerHTML='<a href="javascript:void(0)" id="preBtn">\u4e0a\u4e00\u9875</a><a href="javascript:void(0)" id="nextBtn">\u4e0b\u4e00\u9875</a>',g(".e_page_3").appendChild(x),g("#preBtn").onclick=function(){L.pre();return!1},g("#nextBtn").onclick=function(){L.next();return!1});r.onbegin=function(){F("\u5904\u7406\u7167\u7247\u4e2d\uff0c\u8bf7\u7a0d\u540e...")};
r.onadd=function(a,b){da.addImage(a,b)};r.onprogress=function(a){F("\u5904\u7406\u7167\u7247\u4e2d\uff0c\u8fdb\u5ea6"+Math.round(1E4*a)/100+"%")};r.oncomplete=function(){G()};r.init();r.bind("#addImage");window.showBlurBg=function(a){var b=a.previousSibling;if("CANVAS"==b.tagName)a:{b.getContext("2d").drawImage(a,0,0,b.width,b.height),a=b.width;var c=b.height,d=Math.round(b.width/10);if(!(isNaN(d)||1>d)){var d=d|0,e=b.getContext("2d"),f;try{try{f=e.getImageData(0,0,a,c)}catch(g){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),
f=e.getImageData(0,0,a,c)}catch(k){b.style["-webkit-filter"]=b.style["-ms-filter"]=b.style.filter="blur("+d+"px)";break a}}}catch(l){b.style["-webkit-filter"]=b.style["-ms-filter"]=b.style.filter="blur("+d+"px)"}var b=f.data,p,r,m,n,u,x,y,z,A,s,v,w,t,C,D,H,I,J,B;p=d+d+1;var K=a-1,M=c-1,E=d+1,F=E*(E+1)/2,G=new Z,q=G;for(m=1;m<p;m++)if(q=q.next=new Z,m==E)var N=q;q.next=G;q=m=null;x=u=0;var L=fa[d],O=ga[d];for(r=0;r<c;r++){t=C=D=y=z=A=0;s=E*(H=b[u]);v=E*(I=b[u+1]);w=E*(J=b[u+2]);y+=F*H;z+=F*I;A+=F*
J;q=G;for(m=0;m<E;m++)q.r=H,q.g=I,q.b=J,q=q.next;for(m=1;m<E;m++)n=u+((K<m?K:m)<<2),y+=(q.r=H=b[n])*(B=E-m),z+=(q.g=I=b[n+1])*B,A+=(q.b=J=b[n+2])*B,t+=H,C+=I,D+=J,q=q.next;m=G;q=N;for(p=0;p<a;p++)b[u]=y*L>>O,b[u+1]=z*L>>O,b[u+2]=A*L>>O,y-=s,z-=v,A-=w,s-=m.r,v-=m.g,w-=m.b,n=x+((n=p+d+1)<K?n:K)<<2,t+=m.r=b[n],C+=m.g=b[n+1],D+=m.b=b[n+2],y+=t,z+=C,A+=D,m=m.next,s+=H=q.r,v+=I=q.g,w+=J=q.b,t-=H,C-=I,D-=J,q=q.next,u+=4;x+=a}for(p=0;p<a;p++){C=D=t=z=A=y=0;u=p<<2;s=E*(H=b[u]);v=E*(I=b[u+1]);w=E*(J=b[u+2]);
y+=F*H;z+=F*I;A+=F*J;q=G;for(m=0;m<E;m++)q.r=H,q.g=I,q.b=J,q=q.next;n=a;for(m=1;m<=d;m++)u=n+p<<2,y+=(q.r=H=b[u])*(B=E-m),z+=(q.g=I=b[u+1])*B,A+=(q.b=J=b[u+2])*B,t+=H,C+=I,D+=J,q=q.next,m<M&&(n+=a);u=p;m=G;q=N;for(r=0;r<c;r++)n=u<<2,b[n]=y*L>>O,b[n+1]=z*L>>O,b[n+2]=A*L>>O,y-=s,z-=v,A-=w,s-=m.r,v-=m.g,w-=m.b,n=p+((n=r+E)<M?n:M)*a<<2,y+=t+=m.r=b[n],z+=C+=m.g=b[n+1],A+=D+=m.b=b[n+2],m=m.next,s+=H=q.r,v+=I=q.g,w+=J=q.b,t-=H,C-=I,D-=J,q=q.next,u+=a}e.putImageData(f,0,0)}}};da.init()}})();
