<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>乡约奥运公益课堂志愿者召集令</title>
<base href="/microblog-v3/h5/zhijiao/">

<script src="mobileshow.js" type="text/javascript"></script>
<link rel="stylesheet" href="animation.css" type="text/css">
<link rel="stylesheet" href="style.css" type="text/css">
 <link rel="stylesheet" href="cityPicker.css">
<!-- 天润测试代码 -->
<META name="filetype" content="1">
<META name="publishedtype" content="1">
<META name="pagetype" content="2">
<META name="catalogs" content="SQ_0002001">
<!-- /天润测试代码 -->

<!-- 百度统计 -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?8d2077d60272dd9e6d0ea4e1e413b118";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- /百度统计 -->
</head>
<body>

<div class="slideshow">
	<div class="globalPackage"><div class="sound s_off"></div><div class="moveArr"></div></div>
  <!-- 自定义场景 begin -->
  <!-- 内页 -->
  <!-- P5 -->
  <div class="scenery page_01">
    <div class="bg"></div>
    <div class="title" data-animationIn="fadeInDown 0.5s 0s"></div>
    <div class="pic_01" data-animationIn="fadeIn 0.5s 0.5s"></div>
    <div class="logo" data-animationIn="fadeInUp 0.5s 1s"></div>
  </div>
  <div class="scenery userScenery_05">
    <div class="bg"></div>
    <div class="pic_top anItem"></div>
    <div class="pic_bottom anItem"></div>
    <div class="title anItem"></div>
    <video class="videoObj" id="video_5"></video>
    <div class="txt anItem" data-animationIn="fadeInLeft 0.5s 0.3s"></div>
    <a href="javascript:0" class="btn_zan anItem" data-animationIn="fadeInRight 0.5s 0.5s" data-zan="h5_10005"><span>--次</span></a>
    <a href="javascript:0" class="btn_play anItem" onclick="playVideo(5)"></a>
  </div>
  <!-- P2 -->
  <div class="scenery userScenery_02">
    <div class="bg"></div>
    <div class="pic_top anItem"></div>
    <div class="pic_bottom anItem"></div>
    <div class="title anItem"></div>
    <video class="videoObj" id="video_2"></video>
    <div class="txt anItem" data-animationIn="fadeInUp 0.5s 0.3s"></div>
    <a href="javascript:0" class="btn_zan anItem" data-animationIn="fadeInLeft 0.5s 0.5s" data-zan="h5_10002"><span>--次</span></a>
    <a href="javascript:0" class="btn_play anItem" onclick="playVideo(2)"></a>
  </div>

  <!-- P4 -->
  <div class="scenery userScenery_04">
    <div class="bg"></div>
    <div class="pic_top anItem"></div>
    <div class="pic_bottom anItem"></div>
    <div class="title anItem"></div>
    <video class="videoObj" id="video_4"></video>
    <div class="txt anItem" data-animationIn="fadeInRight 0.5s 0.3s"></div>
    <a href="javascript:0" class="btn_zan anItem" data-animationIn="fadeInUp 0.5s 0.5s" data-zan="h5_10004"><span>--次</span></a>
    <a href="javascript:0" class="btn_play anItem" onclick="playVideo(4)"></a>
  </div>
  
  <!-- P1 -->
  <div class="scenery userScenery_01">
    <div class="bg"></div>
    <div class="pic_top anItem"></div>
    <div class="pic_bottom anItem"></div>
    <div class="title anItem"></div>
    <div class="txt anItem" data-animationIn="fadeInLeft 0.5s 0.3s"></div>
    <a href="javascript:0" class="btn_zan anItem" data-animationIn="fadeInRight 0.5s 0.5s" data-zan="h5_10001"><span>--次</span></a>
  </div>

  <!-- P3 -->
  <div class="scenery userScenery_03">
    <div class="bg"></div>
    <div class="pic_top anItem"></div>
    <div class="pic_bottom anItem"></div>
    <div class="title anItem"></div>
    <video class="videoObj" id="video_3"></video>
    <div class="txt anItem" data-animationIn="fadeInUp 0.5s 0.3s"></div>
    <a href="javascript:0" class="btn_zan anItem" data-animationIn="fadeInRight 0.5s 0.5s" data-zan="h5_10003"><span>--次</span></a>
    <a href="javascript:0" class="btn_play anItem" onclick="playVideo(3)"></a>
  </div>
  
  
  
<!-- 封底 -->
	<div class="scenery page_end">
		<div class="bg"></div>
    <div class="pic_top anItem"></div>
    <div class="pic_bottom anItem"></div>
    <div class="end01">
    <div class="title anItem"></div>
      <div id="step01">
        <div class="txt anItem" data-animationIn="fadeIn 1s 0.5s"><p>在乡间，有这样一些孩子，他们喜欢体育运动，渴望了解奥林匹克，但他们没有专门的运动器材、没有专业的老师指导……</p><p>你是否愿意将奥林匹克知识和文化带给他们？请加入我们的行列，参与支教助学，开展奥林匹克教育，做一名公益课堂志愿者！</p></div>
        <div class="arrLink anItem" data-animationIn="fadeInUp 0.5s 1s"><a href="javascript:void(0)" id="btn_join">我要加入</a><br/>
        <a href="http://bbs1.people.com.cn/board/80.html" class="toTopic">*志愿者团队人民网供稿专区</a></div>
      </div>
      <div id="step02">
        <form class="fm_info anItem" name="infoForm">
          <p>马上成为乡约奥运公益课堂志愿者！</p> 
          <ul>
            <li><label>学校</label><input type="text" name="school" placeholder="请输入学校名"></li>
            <li><label>姓名</label><input type="text" name="username" placeholder="请输入您的姓名"></li>
            <li><label>团队</label><input type="text" name="team" placeholder="请输入您的团队"></li>
            <li class="sp"><label>支教地</label><input type="text" id='city-picker' name="province" placeholder="请输入省市"><em></em></li>
          </ul>
          <a href="javascript:void(0)" id="btn_smt" >提交</a>
        </form>  
      </div>
      
    </div>
  <div class="end02">
    <div class="title anItem"></div>
    <div class="txt anItem"><p>我已成为奥运公益课堂<br />第<span id="uCount">--</span>名志愿者，<br />与奥运冠军<br />一起为乡村孩子支教助学</p>
    <a href="javascript:void(0)" id="btn_share" >分享到朋友圈</a>
</div>
  </div>
  </div>

  <!-- 自定义场景 end -->
</div>
<div id="shareAlert"><div class="shareArr"></div><div class="shareText">现在可以点击这里<br>点击【分享到朋友圈】</div></div>

<script>
(function(){
  /* ---------------------------- Base64 -------------------------- */
  function Base64() {
    // private property
    var _key = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    
    if(typeof _bKey == 'object'){
      var _keyStr = '';
      for (var i = 0; i < _key.length; i++) {
        _keyStr += String.fromCharCode(_key.charCodeAt(i) * 3 - _bKey[i]);
      };
    }else{
      _keyStr = _key;
    };

    // public method for encoding
    this.encode = function (input) {
      var output = "";
      var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
      var i = 0;
      input = _utf8_encode(input);
      while (i < input.length) {
        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);
        enc1 = chr1 >> 2;
        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
        enc4 = chr3 & 63;
        if (isNaN(chr2)) {
          enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
          enc4 = 64;
        }
        output = output +
        _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +
        _keyStr.charAt(enc3) + _keyStr.charAt(enc4);
      }
      return output;
    }
   
    // public method for decoding
    this.decode = function (input) {
      var output = "";
      var chr1, chr2, chr3;
      var enc1, enc2, enc3, enc4;
      var i = 0;
      input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
      while (i < input.length) {
        enc1 = _keyStr.indexOf(input.charAt(i++));
        enc2 = _keyStr.indexOf(input.charAt(i++));
        enc3 = _keyStr.indexOf(input.charAt(i++));
        enc4 = _keyStr.indexOf(input.charAt(i++));
        chr1 = (enc1 << 2) | (enc2 >> 4);
        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
        chr3 = ((enc3 & 3) << 6) | enc4;
        output = output + String.fromCharCode(chr1);
        if (enc3 != 64) {
          output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
          output = output + String.fromCharCode(chr3);
        }
      }
      output = _utf8_decode(output);
      return output;
    }
   
    // private method for UTF-8 encoding
    var _utf8_encode = function (string) {
      string = string.replace(/\r\n/g,"\n");
      var utftext = "";
      for (var n = 0; n < string.length; n++) {
        var c = string.charCodeAt(n);
        if (c < 128) {
          utftext += String.fromCharCode(c);
        } else if((c > 127) && (c < 2048)) {
          utftext += String.fromCharCode((c >> 6) | 192);
          utftext += String.fromCharCode((c & 63) | 128);
        } else {
          utftext += String.fromCharCode((c >> 12) | 224);
          utftext += String.fromCharCode(((c >> 6) & 63) | 128);
          utftext += String.fromCharCode((c & 63) | 128);
        }
   
      }
      return utftext;
    }
   
    // private method for UTF-8 decoding
    var _utf8_decode = function (utftext) {
      var string = "";
      var i = 0;
      var c, c1, c2;
      c = c1 = c2 = 0;
      while ( i < utftext.length ) {
        c = utftext.charCodeAt(i);
        if (c < 128) {
          string += String.fromCharCode(c);
          i++;
        } else if((c > 191) && (c < 224)) {
          c2 = utftext.charCodeAt(i+1);
          string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
          i += 2;
        } else {
          c2 = utftext.charCodeAt(i+1);
          c3 = utftext.charCodeAt(i+2);
          string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
          i += 3;
        }
      }
      return string;
    }
  };

  window.base64 = new Base64();
})();

(function(){
  if(document.addEventListener){
  document.addEventListener('touchmove', function(e){
    e.preventDefault();
  }, false); 
  }
  function Q(s, p){
    return (p || document).querySelector(s);
  };
  function QA(s, p){
    return (p || document).querySelectorAll(s);
  };
  //预载图片
  var preload = [
    'images/p2_bg.jpg',
    'images/p3_bg.jpg',
    'images/p4_bg.jpg',
    'images/p5_bg.jpg'
  ];
  mobileshow.init('.slideshow', preload);
  
  //背景音乐
  var bgAudio = 'images/sound.mp3';
  mobileshow.setSound(bgAudio);

  var viewWidth = document.body.clientWidth;
  var isMobile = navigator.userAgent.match(/(?:Windows Phone|SymbianOS|Android|iPad|iPod|iPhone)/);
  var isWX =  navigator.userAgent.indexOf('Messenger') !== -1;

  isMobile = isMobile ? isMobile[0] : false;
  
  if(isMobile){
    var f = document.documentElement.clientWidth / 640 * 32;
    
    if(document.documentElement.clientWidth / document.documentElement.clientHeight > 0.6349){
      //小屏幕手机单独定义CSS
      //document.body.className = 'smallScreen';
      f = document.documentElement.clientHeight / 1008 * 32;
    }
    document.documentElement.style['font-size'] = f + 'px';
    document.body.style['max-width'] = '20rem';
    document.body.style['width'] = viewWidth + 'px';
    document.body.style['position'] = 'relative';
  }else{
    var f = document.documentElement.clientHeight / 504 * 16,
      viewWidth = Math.round(document.documentElement.clientHeight / 504 * 320);
    document.documentElement.style['font-size'] = f + 'px';
    document.body.style['overflow'] = 'hidden';
    document.body.style['max-width'] = '640px';
    document.body.style['width'] = viewWidth + 'px';
    document.body.style['position'] = 'relative';

    var pb = document.createElement('div');
    pb.className = 'pageBtn';
    pb.style.left = viewWidth + 'px';
    pb.innerHTML = '<a href="javascript:void(0)" id="preBtn">上一页</a><a href="javascript:void(0)" id="nextBtn">下一页</a>'
    document.body.appendChild(pb);

    Q('#preBtn').onclick = function(){
      mobileshow.pre();
      return false;
    };
    Q('#nextBtn').onclick = function(){
      mobileshow.next();
      return false;
    };
  };
Q('#btn_share').onclick = function(){
  Q('#shareAlert').style.display = 'block';
  setTimeout(function(){
    Q('#shareAlert').style.display = 'none';
  }, 5000);
};
// 我要加入
Q('#btn_join').onclick = function(){
  Q('#step02').style.display="block";
  Q('#step01').style.display="none";
  return false;
};
// 提交
Q('#btn_smt').onclick = function(){
  var school = document.infoForm.school.value.trim();
  var username = document.infoForm.username.value.trim();
  var team = document.infoForm.team.value.trim();
  var province = document.infoForm.province.value.trim();
  if(school.length < 3){
    alert('请正确输入学校名称');
    return;
  }
  if(username.length < 1){
    alert('请输入您的姓名');
    return;
  }
  if(team.length < 2){
    alert('请正确输入团队名称');
    return;
  }
  if(province.length < 4){
    alert('请正确输入团队名称');
    return;
  }
  var API = '/zhijiao.action';
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function(){
    if(xhr.readyState == 4 && xhr.status == 200){
      if(xhr.responseText != 0){
        Q('.end02').style.display="block";
        Q('.end01').style.display="none";
        Q('#uCount').innerHTML = xhr.responseText;
        shareData.title = '我已成为奥运公益课堂第' + xhr.responseText + '名志愿者，为乡村孩子支教助学。';
        initWXShare();
      }else{
        alert('提交失败，请稍后再试！');
      };
    }else if(xhr.readyState == 4){
      alert('网络忙，请稍后再试！code:' + xhr.status);
    };
  };
  xhr.open('POST', API, true);
  xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
  xhr.send('school=' + encodeURIComponent(base64.encode(school)) + '&name=' + encodeURIComponent(base64.encode(username)) + '&team=' + encodeURIComponent(base64.encode(team)) + '&province=' + encodeURIComponent(base64.encode(province)));
};

var videoObj;
mobileshow.onchange = function(){
  if(videoObj){
    videoObj.pause();
    videoObj.style.display = 'none';
    videoObj = null;
    Q('.sound').style.display = 'block';
  }
}
window.playVideo = function(id){
  videoObj = Q('#video_' + id);
  if(videoObj){
    Q('.sound').style.display = 'none';
    mobileshow.stopSound();
    videoObj.src = 'video/0' + id + '.mp4';
    videoObj.play();
    videoObj.style.display = 'block';
    videoObj.onended = function(){
      this.style.display = 'none';
    }
  }
}
//初始化点赞
function getScript(url,dispose){
  var scriptNode = document.createElement("script");
  scriptNode.type = "text/javascript";
  scriptNode.onreadystatechange = scriptNode.onload = function(){
    if (!this.readyState || this.readyState == "loaded" || this.readyState == "complete"){
      if(dispose){dispose()};
      scriptNode.onreadystatechange = scriptNode.onload = null;
      scriptNode.parentNode.removeChild(scriptNode);
    }
  };
  scriptNode.src = url;
  document.getElementsByTagName("head")[0].appendChild(scriptNode);
}
window.dianzanInit = function(s){
  if(!s){s = document.body}
    var eles = QA('a[data-zan]', s);
    for (var i = 0; i < eles.length; i++) {
      initEle.call(eles[i]);
    };
    function initEle(){
      var _self = this;
      var id = this.getAttribute('data-zan');
      if(!id){
        return;
      }
      var fnName = '_zanCallbackFn_' + Math.round(Math.random() * 1e8);

      if(id){
          //read
          window[fnName] = function(d){
              if(typeof d !== 'undefined'){
                  Q('span', _self).innerHTML = d + '次';
              };
          }
          
          getScript('http://mblog.people.com.cn/getRmjkwDzCount.action?id=' + id + '&callback=' + fnName);

          //click
          this.onclick = function(){
              // if(window.localStorage && localStorage['zanList']){
              //     if(localStorage['zanList'].match(new RegExp('(^|,)' + id + '(,|$)'))){
              //         alert('您已经点过赞了！');
              //         return;
              //     }
              // };
              // if(!this.getAttribute('data-zan')){
              //     alert('您已经点过赞了！');
              //     return;
              // };
              this.removeAttribute('data-zan');
              this.onclick = null;
              // if(window.localStorage){
              //     localStorage['zanList'] = (localStorage['zanList'] || '') + id + ',';
              // }
              Q('span', _self).className = 's';
              getScript('http://t.people.com.cn/addRmjkwDz.action?id=' + id + '&callback=' + fnName);
          };
        }
    };
}
dianzanInit();
})();


</script>
<script type='text/javascript' src='http://g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
<script type='text/javascript' src='http://g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
<script type="text/javascript" src="http://g.alicdn.com/msui/sm/0.6.2/js/sm-city-picker.min.js" charset="utf-8"></script>
<script>
  $("#city-picker").cityPicker({
    toolbarTemplate: '<header class="bar bar-nav">\
    <button class="button button-link pull-right close-picker">确定</button>\
    <h1 class="title">选择省市</h1>\
    </header>'
  });
</script>
<!-- 微信分享接口 -->
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>

<script type="text/javascript">

var src = "http://58.68.146.12/weixin/JS.js?url=" + encodeURIComponent(location.href.split('#')[0]);
var left = unescape('%3c');
var right = unescape('%3E');
document.write(left + 'script src="' + src + '"' + right + left + '/script' + right);
</script>
<script>
var shareData = {
  imgUrl : 'http://mblog.people.com.cn/microblog-v3/h5/zhijiao/images/icon.jpg',
  link :  'http://mblog.people.com.cn/h5/zhijiao',
  title : '加入奥运公益课堂志愿者，为乡村孩子支教助学。',
  desc : '乡约奥运公益课堂志愿者召集令'
};

peopleWXConfig.jsApiList = ['onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo'];
wx.config(peopleWXConfig);
function initWXShare(){
    wx.onMenuShareAppMessage({
        title: shareData.title,
        desc: shareData.desc,
        link: shareData.link,
        imgUrl: shareData.imgUrl
    });
    wx.onMenuShareTimeline({
        title: shareData.title,
        link: shareData.link,
        imgUrl: shareData.imgUrl
    });
    wx.onMenuShareQQ({
        title: shareData.title,
        desc: shareData.desc,
        link: shareData.link,
        imgUrl: shareData.imgUrl
    });
    wx.onMenuShareWeibo({
        title: shareData.title,
        desc: shareData.desc,
        link: shareData.link,
        imgUrl: shareData.imgUrl
    });
}
wx.ready(initWXShare);
</script>

<!-- 天润测试代码 -->
<script src="http://www.people.com.cn/css/2010tianrun/webdig_test.js" type="text/javascript"></script>
<!-- /天润测试代码 -->
</body>
</html>